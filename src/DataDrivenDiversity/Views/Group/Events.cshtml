@model EventsViewModel
@{
    ViewData["Title"] = "Event";
}


<h1 class="title">Events</h1>
<h2>@Model.GroupUrlName</h2>

<canvas id="groupEventsChart"></canvas>

<script src="~/js/chart.js"></script>
<script>
    var rsvpLabels = [];
    var rsvpData = [];
    var rsvpBgColor = [];
    var rsvpBorderColor = [];

    @foreach (var ev in Model.Events)
    {
        @:rsvpLabels.push("@ev.Name");
        @:rsvpData.push("@ev.YesRsvpCount");
        @:rsvpBgColor.push("rgba(255, 99, 132, 0.5)");
        @:rsvpBorderColor.push("rgba(255,99,132,1)");
    }

    var ctx = document.getElementById("groupEventsChart");

    var groupEventsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: rsvpLabels,
            datasets: [{
                label: 'RSVPs',
                data: rsvpData,
                backgroundColor: rsvpBgColor,
                borderColor: rsvpBorderColor,
                borderWidth: 1
            }],
        },
        options: {
            scales: {
                xAxes: [{
                    ticks: {
                        display: false
                    }
                }],
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            }
        }
    });
</script>

<p>Total: @Model.Events.Count()</p>

<ul>
    @foreach (var ev in Model.Events)
    {
        @if (ev.SpeakerData != null && ev.SpeakerData.Names != null && ev.SpeakerData.Names.Count() > 1 &&
            ev.SpeakerData.Pronouns != null && (ev.SpeakerData.Pronouns.Contains("she") || ev.SpeakerData.Pronouns.Contains("She")))
        {
            <li>üë©‚Äçüíª <a asp-controller="Group" asp-action="Event" asp-route-urlname="@Model.GroupUrlName" asp-route-id="@ev.Id">@ev.Name</a> <span style="color: #ccc">@ev.Time UTC</span></li>
        }
        else
        {
            <li> <a asp-controller="Group" asp-action="Event" asp-route-urlname="@Model.GroupUrlName" asp-route-id="@ev.Id">@ev.Name</a> <span style="color: #ccc">@ev.Time UTC</span></li>
        }
    }
</ul>

